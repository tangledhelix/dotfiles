-- packer requires neovim 0.5, so anything requiring 0.5+ is also covered
-- by this check
if vim.fn.has('nvim-0.5') == 1 then

    -- certain things require a recent neovim, and servers tend to not
    -- have that, at least in my world. so some plugins are only set
    -- up on macOS. that's a shorthand for "neovim is too old on
    -- all the linuxes I use on servers and I'm too lazy to work out
    -- upgrading those"

    vim.cmd [[packadd packer.nvim]]

    return require('packer').startup(function(use)
        use 'wbthomason/packer.nvim'

        use {
            'rose-pine/neovim',
            as = 'rose-pine',
            config = function()
                require('rose-pine').setup()
                vim.cmd('colorscheme rose-pine')
            end
        }

{% if ansible_distribution == 'MacOSX' %}
        use {
            'nvim-telescope/telescope.nvim', tag = '0.1.1',
            -- or                            , branch = '0.1.x',
            requires = { {'nvim-lua/plenary.nvim'} }
        }
{% endif %}

        use {
            'ThePrimeagen/harpoon',
            requires = { {'nvim-lua/plenary.nvim'} }
        }

        if vim.fn.has('nvim-0.8') == 1 then
            use {
                'folke/todo-comments.nvim',
                requires = 'nvim-lua/plenary.nvim',
                config = function()
                    require('todo-comments').setup {
                        -- your configuration comes here
                        -- or leave it empty to use the default settings
                        -- refer to the configuration section below
                    }
                end
            }
        end

        use 'mbbill/undotree'

    end)
end


